--- charts-original/templates/nginx-config.yaml
+++ charts/templates/nginx-config.yaml
@@ -71,7 +71,7 @@
           proxy_cache_bypass  $http_cache_control;
           add_header          X-Proxy-Cache $upstream_cache_status;
           add_header          Cache-Control "public";
-          
+
           proxy_pass     http://localhost:3000/;
 
           sub_filter_once off;
@@ -81,11 +81,11 @@
               # When accessing via ingress host, leave appSubUrl empty
               sub_filter '"appSubUrl":""' '"appSubUrl":""';
             {{- end }}
-          {{- else }}          
-            {{- if eq .Values.global.cattle.clusterId "local" -}}
-              sub_filter '"appSubUrl":""' '"appSubUrl":"/api/v1/namespaces/{{ template "grafana.namespace" . }}/services/http:{{ template "grafana.fullname" . }}:{{ .Values.service.port }}/proxy"';
-            {{- else -}}
+          {{- else }}
+            {{- if and (not (empty .Values.global.cattle.clusterId )) (not (eq .Values.global.cattle.clusterId "local")) -}}
               sub_filter '"appSubUrl":""' '"appSubUrl":"/k8s/clusters/{{ .Values.global.cattle.clusterId }}/api/v1/namespaces/{{ template "grafana.namespace" . }}/services/http:{{ template "grafana.fullname" . }}:{{ .Values.service.port }}/proxy"';
+            {{- else -}}
+              sub_filter '"appSubUrl":""' '"appSubUrl":"/api/v1/namespaces/{{ template "grafana.namespace" . }}/services/http:{{ template "grafana.fullname" . }}:{{ .Values.service.port }}/proxy"';
           {{- end -}}
           {{- end -}}
 
